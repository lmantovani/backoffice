{% extends "base.html" %}
{% block title %}Dashboard - BackOffice Omie{% endblock %}

{% block content %}
<div class="py-4">
  <!-- Cabe√ßalho -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <div>
      <h2 class="h4 mb-1">BackOffice Omie</h2>
      <p class="text-muted mb-0">
        Central de pedidos de compra, anexos e automa√ß√µes com o Omie.
      </p>
    </div>
    <div class="text-end">
      <span class="badge bg-success">Ambiente: Homologa√ß√£o</span>
      {# depois voc√™ pode trocar dinamicamente para Produ√ß√£o/Homologa√ß√£o #}
    </div>
  </div>

  <!-- Linha 1: A√ß√µes r√°pidas -->
  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <a href="{% url 'purchase_orders_ui' %}" class="btn w-100 btn-primary">
        üì¶ Novo Pedido de Compra
      </a>
    </div>
    <div class="col-md-3">
      <a href="{% url 'attachments_page' %}" class="btn w-100 btn-outline-primary">
        üìé Anexos Pendentes
      </a>
    </div>
    <div class="col-md-3">
      <a href="/api/" class="btn w-100 btn-outline-secondary">
        üß© Ver Endpoints da API
      </a>
    </div>
    <div class="col-md-3">
      <a href="/admin/" class="btn w-100 btn-outline-secondary">
        ‚öôÔ∏è Administra√ß√£o do Sistema
      </a>
    </div>
  </div>

  <!-- Linha 2: Indicadores principais -->
  <div class="row g-3 mb-4">
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="small text-muted mb-1">Status Omie</div>
          <div class="d-flex align-items-center">
            <span class="badge bg-success me-2">Online</span>
            <small class="text-muted">√öltimo teste: agora</small>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="small text-muted mb-1">Pedidos aguardando envio</div>
          <h4 class="mb-0">0</h4>
          <small class="text-muted">criados no BackOffice e ainda n√£o integrados</small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="small text-muted mb-1">Anexos pendentes</div>
          <h4 class="mb-0">0</h4>
          <small class="text-muted">requisi√ß√µes com anexo n√£o replicado</small>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="small text-muted mb-1">Erros do rob√¥</div>
          <h4 class="mb-0 text-success">0</h4>
          <small class="text-muted">nas √∫ltimas 24 horas</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Linha 3: Logs e resumo -->
  <div class="row g-3">
    <!-- √öltimas a√ß√µes do rob√¥ -->
    <div class="col-lg-7">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-header bg-white border-0 pb-0">
          <h6 class="mb-1">√öltimas a√ß√µes autom√°ticas</h6>
          <small class="text-muted">
            Registro do rob√¥ de replica√ß√£o de anexos e cria√ß√£o de financeiro.
          </small>
        </div>
        <div class="card-body">
          <table class="table table-sm mb-0">
            <thead>
              <tr>
                <th>Data/Hora</th>
                <th>A√ß√£o</th>
                <th>Refer√™ncia</th>
                <th>Status</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td colspan="4" class="text-muted small">
                  Sem registros ainda. As a√ß√µes do rob√¥ aparecer√£o aqui.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Atalhos / help contextual -->
    <div class="col-lg-5">
      <div class="card border-0 shadow-sm mb-3">
        <div class="card-header bg-white border-0 pb-0">
          <h6 class="mb-1">Como funciona o fluxo</h6>
        </div>
        <div class="card-body small">
          <ol class="mb-2">
            <li>Voc√™ cria o pedido de compra pelo BackOffice.</li>
            <li>O sistema envia o pedido para o Omie.</li>
            <li>Ao encerrar o pedido, o rob√¥ cria o financeiro e replica os anexos.</li>
          </ol>
          <p class="mb-0 text-muted">
            Todos os passos ficam registrados no log acima para auditoria.
          </p>
        </div>
      </div>

      <div class="card border-0 shadow-sm">
        <div class="card-header bg-white border-0 pb-0">
          <h6 class="mb-1">Configura√ß√µes r√°pidas</h6>
        </div>
        <div class="card-body small">
          <ul class="mb-0">
            <li>Cadastre as chaves da API Omie no <a href="/admin/">Admin</a>.</li>
            <li>Defina regras do rob√¥ (intervalo, filtros) na √°rea de configura√ß√µes.</li>
            <li>Acompanhe erros e reprocessamentos pelo log de automa√ß√£o.</li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}
